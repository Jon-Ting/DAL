<dataConfig>

  <dataSource name="monetdb-ds" type="JdbcDataSource"
            driver="nl.cwi.monetdb.jdbc.MonetDriver"
            url="jdbc:monetdb://localhost/kddart_marker_v2_7_0"
            user="monetdb"
            password="monetdb" />

  <dataSource name="mysql-ds" type="JdbcDataSource"
            driver="com.mysql.jdbc.Driver"
            url="jdbc:mysql://localhost:3306/kddart_v2_7_0?useSSL=false"
            user="kddart_dal"
            password="yourSecurePassword" />
  <document>
    <entity dataSource="mysql-ds" name="geno_avg_trait_val" query="select 'geno_avg_trait_val' as entity_name, concat(trial.TrialId, '-', genotype.GenotypeId, '-', trait.TraitId, '-', SampleTypeId) as SolrId, trial.TrialId, TrialName, TrialStartDate, TrialEndDate, site.SiteName, genotype.GenotypeId, GenotypeName, trialunitspecimen.SpecimenId, specimen.SpecimenName, trait.TraitId, TraitName, trait.UnitId as TraitUnitId, UnitName as TraitUnitName, TypeName as SampleTypeName, AVG(TraitValue) as AVG_TraitValue from samplemeasurement left join trait on samplemeasurement.TraitId=trait.TraitId left join trialunit on samplemeasurement.TrialUnitId=trialunit.TrialUnitId left join trialunitspecimen on trialunit.TrialUnitId=trialunitspecimen.TrialUnitId left join genotypespecimen on trialunitspecimen.SpecimenId=genotypespecimen.SpecimenId left join specimen on genotypespecimen.SpecimenId=specimen.SpecimenId left join genotype on genotypespecimen.GenotypeId=genotype.GenotypeId left join trial on trialunit.TrialId=trial.TrialId left join site on trial.SiteId=site.SiteId left join generaltype on samplemeasurement.SampleTypeId=generaltype.TypeId left join generalunit on trait.UnitId=generalunit.UnitId where TraitValue*0 != TraitValue group by trial.TrialId, genotype.GenotypeId, TraitName, TypeName;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="item_spec" query="select 'item_spec' as entity_name, concat('ITM', '-', ItemId) as SolrId, ItemId, item.UnitId as ItemUnitId, TrialUnitSpecimenId, ItemSourceId, ContainerTypeId, item.SpecimenId, specimen.SpecimenName, GenotypeId, ScaleId, item.StorageId, ItemTypeId, generaltype1.TypeName as ItemTypeName, ItemStateId, generaltype2.TypeName as ItemStateName, ItemBarcode, Amount, DateAdded, AddedByUserId, LastMeasuredDate, LastMeasuredUserId, ItemOperation, ItemNote, UnitName as ItemUnitName, StorageLocation from item left join generalunit on item.UnitId=generalunit.UnitId left join generaltype as generaltype1 on item.ItemTypeId=generaltype1.TypeId left join generaltype as generaltype2 on item.ItemStateId=generaltype2.TypeId left join genotypespecimen on item.SpecimenId=genotypespecimen.SpecimenId left join specimen on genotypespecimen.SpecimenId = specimen.SpecimenId left join storage on item.StorageId = storage.StorageId;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="specimen_trait" query="select 'specimen_trait' as entity_name, concat('SPECTRAIT-', GenotypeTraitId) as SolrId, trait.TraitName as KnownForTraitName, genotypetrait.TraitValue as KnownForTraitValue, genotypetrait.GenotypeId, SpecimenId from genotypetrait left join trait on genotypetrait.TraitId = trait.TraitId left join genotypespecimen on genotypetrait.GenotypeId = genotypespecimen.GenotypeId;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="spec_geno_alias_0_1m" query="select 'spec_geno_alias' as entity_name, concat('SG_ALIAS-', GenotypeAliasId) as SolrId, GenotypeAliasName, GenotypeAliasType, GenotypeAliasStatus, GenotypeAliasLang, genotypealias.GenotypeId, generaltype1.TypeName as GenotypeAliasTypeName, generaltype2.TypeName as GenotypeAliasStatusName, genotypespecimen.SpecimenId from genotypealias left join generaltype as generaltype1 on genotypealias.GenotypeAliasType = generaltype1.TypeId left join generaltype as generaltype2 on genotypealias.GenotypeAliasStatus = generaltype2.TypeId left join genotypespecimen on genotypealias.GenotypeId = genotypespecimen.GenotypeId LIMIT 1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="spec_geno_alias_1_1m" query="select 'spec_geno_alias' as entity_name, concat('SG_ALIAS-', GenotypeAliasId) as SolrId, GenotypeAliasName, GenotypeAliasType, GenotypeAliasStatus, GenotypeAliasLang, genotypealias.GenotypeId, generaltype1.TypeName as GenotypeAliasTypeName, generaltype2.TypeName as GenotypeAliasStatusName, genotypespecimen.SpecimenId from genotypealias left join generaltype as generaltype1 on genotypealias.GenotypeAliasType = generaltype1.TypeId left join generaltype as generaltype2 on genotypealias.GenotypeAliasStatus = generaltype2.TypeId left join genotypespecimen on genotypealias.GenotypeId = genotypespecimen.GenotypeId LIMIT 1000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="spec_geno_alias_2_1m" query="select 'spec_geno_alias' as entity_name, concat('SG_ALIAS-', GenotypeAliasId) as SolrId, GenotypeAliasName, GenotypeAliasType, GenotypeAliasStatus, GenotypeAliasLang, genotypealias.GenotypeId, generaltype1.TypeName as GenotypeAliasTypeName, generaltype2.TypeName as GenotypeAliasStatusName, genotypespecimen.SpecimenId from genotypealias left join generaltype as generaltype1 on genotypealias.GenotypeAliasType = generaltype1.TypeId left join generaltype as generaltype2 on genotypealias.GenotypeAliasStatus = generaltype2.TypeId left join genotypespecimen on genotypealias.GenotypeId = genotypespecimen.GenotypeId LIMIT 2000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="spec_geno_alias_3_1m" query="select 'spec_geno_alias' as entity_name, concat('SG_ALIAS-', GenotypeAliasId) as SolrId, GenotypeAliasName, GenotypeAliasType, GenotypeAliasStatus, GenotypeAliasLang, genotypealias.GenotypeId, generaltype1.TypeName as GenotypeAliasTypeName, generaltype2.TypeName as GenotypeAliasStatusName, genotypespecimen.SpecimenId from genotypealias left join generaltype as generaltype1 on genotypealias.GenotypeAliasType = generaltype1.TypeId left join generaltype as generaltype2 on genotypealias.GenotypeAliasStatus = generaltype2.TypeId left join genotypespecimen on genotypealias.GenotypeId = genotypespecimen.GenotypeId LIMIT 3000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="spec_geno_alias_4_1m" query="select 'spec_geno_alias' as entity_name, concat('SG_ALIAS-', GenotypeAliasId) as SolrId, GenotypeAliasName, GenotypeAliasType, GenotypeAliasStatus, GenotypeAliasLang, genotypealias.GenotypeId, generaltype1.TypeName as GenotypeAliasTypeName, generaltype2.TypeName as GenotypeAliasStatusName, genotypespecimen.SpecimenId from genotypealias left join generaltype as generaltype1 on genotypealias.GenotypeAliasType = generaltype1.TypeId left join generaltype as generaltype2 on genotypealias.GenotypeAliasStatus = generaltype2.TypeId left join genotypespecimen on genotypealias.GenotypeId = genotypespecimen.GenotypeId LIMIT 4000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="spec_geno_alias_5_1m" query="select 'spec_geno_alias' as entity_name, concat('SG_ALIAS-', GenotypeAliasId) as SolrId, GenotypeAliasName, GenotypeAliasType, GenotypeAliasStatus, GenotypeAliasLang, genotypealias.GenotypeId, generaltype1.TypeName as GenotypeAliasTypeName, generaltype2.TypeName as GenotypeAliasStatusName, genotypespecimen.SpecimenId from genotypealias left join generaltype as generaltype1 on genotypealias.GenotypeAliasType = generaltype1.TypeId left join generaltype as generaltype2 on genotypealias.GenotypeAliasStatus = generaltype2.TypeId left join genotypespecimen on genotypealias.GenotypeId = genotypespecimen.GenotypeId LIMIT 5000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="spec_geno_alias_6_1m" query="select 'spec_geno_alias' as entity_name, concat('SG_ALIAS-', GenotypeAliasId) as SolrId, GenotypeAliasName, GenotypeAliasType, GenotypeAliasStatus, GenotypeAliasLang, genotypealias.GenotypeId, generaltype1.TypeName as GenotypeAliasTypeName, generaltype2.TypeName as GenotypeAliasStatusName, genotypespecimen.SpecimenId from genotypealias left join generaltype as generaltype1 on genotypealias.GenotypeAliasType = generaltype1.TypeId left join generaltype as generaltype2 on genotypealias.GenotypeAliasStatus = generaltype2.TypeId left join genotypespecimen on genotypealias.GenotypeId = genotypespecimen.GenotypeId LIMIT 6000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="spec_geno_alias_7_1m" query="select 'spec_geno_alias' as entity_name, concat('SG_ALIAS-', GenotypeAliasId) as SolrId, GenotypeAliasName, GenotypeAliasType, GenotypeAliasStatus, GenotypeAliasLang, genotypealias.GenotypeId, generaltype1.TypeName as GenotypeAliasTypeName, generaltype2.TypeName as GenotypeAliasStatusName, genotypespecimen.SpecimenId from genotypealias left join generaltype as generaltype1 on genotypealias.GenotypeAliasType = generaltype1.TypeId left join generaltype as generaltype2 on genotypealias.GenotypeAliasStatus = generaltype2.TypeId left join genotypespecimen on genotypealias.GenotypeId = genotypespecimen.GenotypeId LIMIT 7000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="specimen_genotype_0_1m" query="select 'specimen_genotype' as entity_name, concat('SPEC', specimen.SpecimenId, '-GENO', genotype.GenotypeId) as SolrId, specimen.*, genotype.GenotypeId, GenotypeName, GenusId, SpeciesName, GenotypeAcronym, GenotypeNote from specimen left join genotypespecimen ON specimen.SpecimenId=genotypespecimen.SpecimenId left join genotype on genotypespecimen.GenotypeId=genotype.GenotypeId limit 1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="specimen_genotype_1_1m" query="select 'specimen_genotype' as entity_name, concat('SPEC', specimen.SpecimenId, '-GENO', genotype.GenotypeId) as SolrId, specimen.*, genotype.GenotypeId, GenotypeName, GenusId, SpeciesName, GenotypeAcronym, GenotypeNote from specimen left join genotypespecimen ON specimen.SpecimenId=genotypespecimen.SpecimenId left join genotype on genotypespecimen.GenotypeId=genotype.GenotypeId limit 1000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="specimen_genotype_2_1m" query="select 'specimen_genotype' as entity_name, concat('SPEC', specimen.SpecimenId, '-GENO', genotype.GenotypeId) as SolrId, specimen.*, genotype.GenotypeId, GenotypeName, GenusId, SpeciesName, GenotypeAcronym, GenotypeNote from specimen left join genotypespecimen ON specimen.SpecimenId=genotypespecimen.SpecimenId left join genotype on genotypespecimen.GenotypeId=genotype.GenotypeId limit 2000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="specimen_genotype_3_1m" query="select 'specimen_genotype' as entity_name, concat('SPEC', specimen.SpecimenId, '-GENO', genotype.GenotypeId) as SolrId, specimen.*, genotype.GenotypeId, GenotypeName, GenusId, SpeciesName, GenotypeAcronym, GenotypeNote from specimen left join genotypespecimen ON specimen.SpecimenId=genotypespecimen.SpecimenId left join genotype on genotypespecimen.GenotypeId=genotype.GenotypeId limit 3000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="specimen_genotype_4_1m" query="select 'specimen_genotype' as entity_name, concat('SPEC', specimen.SpecimenId, '-GENO', genotype.GenotypeId) as SolrId, specimen.*, genotype.GenotypeId, GenotypeName, GenusId, SpeciesName, GenotypeAcronym, GenotypeNote from specimen left join genotypespecimen ON specimen.SpecimenId=genotypespecimen.SpecimenId left join genotype on genotypespecimen.GenotypeId=genotype.GenotypeId limit 4000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="specimen_genotype_5_1m" query="select 'specimen_genotype' as entity_name, concat('SPEC', specimen.SpecimenId, '-GENO', genotype.GenotypeId) as SolrId, specimen.*, genotype.GenotypeId, GenotypeName, GenusId, SpeciesName, GenotypeAcronym, GenotypeNote from specimen left join genotypespecimen ON specimen.SpecimenId=genotypespecimen.SpecimenId left join genotype on genotypespecimen.GenotypeId=genotype.GenotypeId limit 5000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="specimen_genotype_6_1m" query="select 'specimen_genotype' as entity_name, concat('SPEC', specimen.SpecimenId, '-GENO', genotype.GenotypeId) as SolrId, specimen.*, genotype.GenotypeId, GenotypeName, GenusId, SpeciesName, GenotypeAcronym, GenotypeNote from specimen left join genotypespecimen ON specimen.SpecimenId=genotypespecimen.SpecimenId left join genotype on genotypespecimen.GenotypeId=genotype.GenotypeId limit 6000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="specimen_genotype_7_1m" query="select 'specimen_genotype' as entity_name, concat('SPEC', specimen.SpecimenId, '-GENO', genotype.GenotypeId) as SolrId, specimen.*, genotype.GenotypeId, GenotypeName, GenusId, SpeciesName, GenotypeAcronym, GenotypeNote from specimen left join genotypespecimen ON specimen.SpecimenId=genotypespecimen.SpecimenId left join genotype on genotypespecimen.GenotypeId=genotype.GenotypeId limit 7000000,1000000;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="spec_item" query="select 'spec_item' as entity_name, concat('SPECITEM-', specimen.SpecimenId, '-', item.ItemId) as SolrId, specimen.SpecimenId, SpecimenName, genotypespecimen.GenotypeId, ItemId, Amount, UnitName as ItemUnitName, TypeName as ItemTypeName, DateAdded, StorageLocation from specimen left join genotypespecimen on specimen.SpecimenId=genotypespecimen.SpecimenId left join item on specimen.SpecimenId=item.SpecimenId left join generalunit on item.UnitId=generalunit.UnitId left join generaltype on item.ItemTypeId=generaltype.TypeId left join storage on item.StorageId=storage.StorageId where ISNULL(item.Amount) = False;" />
    <entity dataSource="mysql-ds" name="trialunit_itm_grp" query="select 'trialunit_itm_grp' as entity_name, concat('TUITMGRP', trialunit.TrialUnitId) as SolrId, TrialId, trialunit.TrialUnitId, trialunitspecimen.SpecimenId, itemgroupentry.ItemGroupId, GenotypeId from trialunit left join trialunitspecimen on trialunit.TrialUnitId = trialunitspecimen.TrialUnitId left join genotypespecimen on trialunitspecimen.SpecimenId = genotypespecimen.SpecimenId left join item on trialunitspecimen.TrialUnitSpecimenId = item.TrialUnitSpecimenId left join itemgroupentry on item.ItemId=itemgroupentry.ItemId where ISNULL(ItemGroupId) = False;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="trialunit_geno" query="select 'trialunit_geno' as entity_name, concat('TUGENO', trialunit.TrialUnitId) as SolrId, 
TrialId, trialunit.TrialUnitId, trialunitspecimen.SpecimenId, GenotypeId from trialunit left join trialunitspecimen on trialunit.TrialUnitId=trialunitspecimen.TrialUnitId left join genotypespecimen on trialunitspecimen.SpecimenId=genotypespecimen.SpecimenId;" rootEntity="true" />
    <entity dataSource="mysql-ds" name="spec_item_nested" query="select 'spec_item_nested' as entity_name, concat('SPECITEM-', specimen.SpecimenId) as SolrId, specimen.SpecimenId, SpecimenName, genotypespecimen.GenotypeId from specimen left join genotypespecimen on specimen.SpecimenId=genotypespecimen.SpecimenId;" rootEntity="true">
        <field name="SpecimenId" column="SpecimenId" />
        <entity dataSource="mysql-ds" name="spec_item_sub" query="select 'spec_item_sub' as entity_name, concat('SPECITEMSUB-', ItemId) as SolrId, ItemId AS ItemList from item  where SpecimenId='${spec_item_nested.SpecimenId}';">
        </entity>
    </entity>


    <entity dataSource="mysql-ds" name="trial_analgrp" query="select 'trial_analgrp' as entity_name, concat('TGENO-', TrialId) as SolrId, TrialId from trialunit left join trialunitspecimen on trialunit.TrialUnitId=trialunitspecimen.TrialUnitId left join specimen on trialunitspecimen.SpecimenId=specimen.SpecimenId left join genotypespecimen on specimen.SpecimenId=genotypespecimen.SpecimenId GROUP BY TrialId;" >

      <field name="TrialId" column="TrialId" />

      <entity dataSource="mysql-ds" name="trial_geno_sub" query="select specimen.SpecimenId as SpecimenList, GenotypeId as GenotypeList from trialunit left join trialunitspecimen on trialunit.TrialUnitId=trialunitspecimen.TrialUnitId left join specimen on trialunitspecimen.SpecimenId = specimen.SpecimenId left join genotypespecimen on specimen.SpecimenId=genotypespecimen.SpecimenId where TrialId='${trial_analgrp.TrialId}';" >

        <field name="GenotypeList" column="GenotypeList" />


        <entity dataSource='monetdb-ds' name='trial_analgrp_geno' query='select "dataset"."AnalysisGroupId" as "GenotypeAnalysisGroupList", "dataset"."DataSetId" as "GenotypeDataSetList" from "extract" left join "analgroupextract" on "extract"."ExtractId" = "analgroupextract"."ExtractId" left join "datasetextract" on "analgroupextract"."AnalGroupExtractId" = "datasetextract"."AnalGroupExtractId" left join "dataset" on "datasetextract"."DataSetId" = "dataset"."DataSetId" where ISNULL("dataset"."DataSetId") = False AND cast("extract"."GenotypeId" as varchar(255))=&apos;${trial_geno_sub.GenotypeList}&apos; ;' >
        </entity>


      </entity>

      <entity dataSource="mysql-ds" name="trial_itmgrp_sub" query="select ItemGroupId as ItemGroupList from trialunit left join trialunitspecimen on trialunit.TrialUnitId=trialunitspecimen.TrialUnitId left join item on trialunitspecimen.TrialUnitSpecimenId=item.TrialUnitSpecimenId left join itemgroupentry on item.ItemId=itemgroupentry.ItemId where TrialId='${trial_analgrp.TrialId}';" >

        <field name="ItemGroupList" column="ItemGroupList" />

        <entity dataSource='monetdb-ds' name='trial_analgrp_itmgrp' query='select "dataset"."AnalysisGroupId" as "ItemGroupAnalysisGroupList", "dataset"."DataSetId" as "ItemGroupDataSetList" from "extract" left join "analgroupextract" on "extract"."ExtractId" = "analgroupextract"."ExtractId" left join "datasetextract" on "analgroupextract"."AnalGroupExtractId" = "datasetextract"."AnalGroupExtractId" left join "dataset" on "datasetextract"."DataSetId" = "dataset"."DataSetId" where ISNULL("dataset"."DataSetId") = False AND cast("extract"."ItemGroupId" as varchar(255))=&apos;${trial_itmgrp_sub.ItemGroupList}&apos; ;' >
        </entity>

      </entity>


    </entity>

  </document>
</dataConfig>
